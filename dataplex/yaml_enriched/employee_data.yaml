metadata_registry_defaults:
  dataplex:
    projects: hca-usr-hin-proc-datalake
    locations: us-central1
    lakes: hr-lake
    zones: hr-enriched-zone

row_filters:
  NONE:
    filter_sql_expr: |-
      True
  INTERNATIONAL_ITEMS:
    filter_sql_expr: |-
      REGEXP_CONTAINS(item_id, 'INTNL')

rule_dimensions:
  - consistency
  - correctness
  - duplication
  - completeness
  - conformance
  - integrity
  - timeliness
  - accuracy

rules:
  NOT_NULL:
    rule_type: NOT_NULL
    dimension: completeness
  VALID_LENGTH_MIN_CHECK:
    rule_type: CUSTOM_SQL_EXPR
    dimension: correctness
    params:
      custom_sql_arguments:
        - min_len
      custom_sql_expr: |-
        LENGTH($column) >= $min_len
  VALID_LENGTH_MAX_CHECK:
    rule_type: CUSTOM_SQL_EXPR
    dimension: correctness
    params:
      custom_sql_arguments:
        - max_len
      custom_sql_expr: |-
        LENGTH($column) <= $max_len

rule_bindings:
  VALID_ADDRESS:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: address
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MIN_CHECK:
          min_len: 5
  VALID_DEPARTMENT_NAME:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: department_name
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MIN_CHECK:
          min_len: 2
  VALID_EMAIL:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: email
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MIN_CHECK:
          min_len: 5
  VALID_EMP_ID:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: employee_id
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MIN_CHECK:
          min_len: 1
  VALID_FIRST_NAME:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: first_name
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
  VALID_LAST_NAME:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: last_name
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
  VALID_PHONE:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: phone
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MAX_CHECK:
          max_len: 13
  VALID_SOURCE_TS:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: source_timestamp
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
  VALID_SSN:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: ssn
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MAX_CHECK:
          max_len: 13
  VALID_STATE:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: state
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
      - VALID_LENGTH_MIN_CHECK:
          min_len: 2
  VALID_ZIP:
    entity_uri: bigquery://projects/hca-usr-hin-cur-datalake/datasets/hca_employee_data_enriched/tables/hca_employee_data_dim
    column_id: zipcode
    row_filter_id: NONE
    incremental_time_filter_column_id: source_timestamp
    rule_ids:
      - NOT_NULL
          